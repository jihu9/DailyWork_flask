#!-*-coding:utf-8-*-from flask import Flask, render_template, requestfrom tinydb import TinyDB, QuerynameList = [['郑明', '01237'],            ['刘美娜', '02402'],            ['张建武', '01056'],            ['苏明', '02518'],            ['雷振华', '02268'],            ['王世明', '01596'],            ['蔡钢', '02405'],            ['尹健', '02512'],            ['耿滏', '02993'],            ['范林', '01673'],            ['李阳修', '02771'],            ['李钊文', '00352'],            ['张锦良', '01760'],            ['彭俊', '01595'],            ['许福军', '01899'],            ['王浩名', '02542'],            ['李银波', '00711'],            ['彭欣强', '01898'],            ['杨臣', '02396'],            ['张吉辉', '02561'],            ['张奇添', '01380']]app = Flask(__name__)def getData():    db = TinyDB('db.json')    tlist = db.all()[::-1]    nlist = []    for i in tlist:        if i not in nlist:            nlist.append(i)    return nlist@app.route('/', methods=['GET', 'POST'])def index():    if request.method == 'POST':        # print(1111)        db = TinyDB('db.json')        ft = Query()        print([request.form['date'],               request.form['id'],               request.form['AM'],               request.form['PM'],               request.form['work'], ])        if (db.search((ft.id == request.form['id']) & (                ft.date == request.form['date'])) and                (request.form['id'] in [item[1] for item in nameList])):            db.update({'work': request.form['work']}, (ft.id ==                                                       request.form['id']) & (                ft.date == request.form['date']))            db.update({'AM': request.form['AM']}, (ft.id ==                                                   request.form['id']) & (                ft.date == request.form['date']))            db.update({'PM': request.form['PM']}, (ft.id ==                                                   request.form['id']) & (                ft.date == request.form['date']))            db.update({'name': [a[0] for a in nameList if                                request.form['id'] in a][0]}, (ft.id == request.form['id']) & (                ft.date == request.form['date']))        elif request.form['id'] in [item[1] for item in nameList]:            db.insert({'date': request.form['date'],                       'name': [a[0] for a in nameList if request.form['id'] in a][0],                       'id': request.form['id'],                       'AM': request.form['AM'],                       'PM': request.form['PM'],                       'work': request.form['work'],                       })        db.close()    else:        print(2222)    cont = getData()    return render_template('index.html', cont=cont[0:25])@app.route('/<id>')def getId(id):    db = TinyDB('db.json')    ft = Query()    cont = db.search(ft.id == str(id))[::-1]    return render_template('index.html', cont=cont[0:25])if __name__ == '__main__':    app.run(host='0.0.0.0', port=8888, debug=True)